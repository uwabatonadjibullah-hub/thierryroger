import React, { useState, useEffect, useRef } from 'react';
import { 
  Mic, 
  Users, 
  Calendar, 
  Globe, 
  Instagram,
  Mail, 
  Phone, 
  MapPin, 
  Menu, 
  X, 
  Award,
  BookOpen,
  ChevronRight,
  Play,
  ArrowRight,
  MessageCircle,
  MessageSquare,
  Download,
  FileText
} from 'lucide-react';

// Custom Hook for Scroll Revelations
const useReveal = () => {
  const [isVisible, setIsVisible] = useState(false);
  const ref = useRef(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
        }
      },
      { threshold: 0.1 }
    );

    if (ref.current) observer.observe(ref.current);
    return () => {
      if (ref.current) observer.unobserve(ref.current);
    };
  }, []);

  return [ref, isVisible];
};

const RevealSection = ({ children, className = "" }) => {
  const [ref, isVisible] = useReveal();
  return (
    <div 
      ref={ref} 
      className={`transition-all duration-1000 transform ${className} ${
        isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-12'
      }`}
    >
      {children}
    </div>
  );
};

const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const experiences = [
    {
      role: "Radio Presenter & Social Media Manager",
      company: "Country FM",
      period: "2 Years",
      image: "https://images.unsplash.com/photo-1590602847861-f357a9332bbc?auto=format&fit=crop&q=80&w=800",
      description: "Driving the narrative and engaging thousands of listeners across the Western Province through broadcast and digital media.",
      icon: <Mic className="w-5 h-5" />
    },
    {
      role: "COVID-19 Campaign Manager",
      company: "Rusizi District",
      period: "2020-2022",
      image: "https://images.unsplash.com/photo-1584483766114-2cea6facdf57?auto=format&fit=crop&q=80&w=800",
      description: "Strategizing and leading public health communication efforts to mobilize the community during the pandemic.",
      icon: <Users className="w-5 h-5" />
    },
    {
      role: "Agricultural Mobilizer",
      company: "World Relief",
      period: "Western Province",
      image: "https://images.unsplash.com/photo-1500382017468-9049fed747ef?auto=format&fit=crop&q=80&w=800",
      description: "Empowering rural women through training in modern agricultural techniques and sustainable financial savings.",
      icon: <Globe className="w-5 h-5" />
    },
    {
      role: "Events Manager",
      company: "Rubavu & Karongi",
      period: "Current",
      image: "https://images.unsplash.com/photo-1492684223066-81342ee5ff30?auto=format&fit=crop&q=80&w=800",
      description: "Coordinating logistics and PR for major cultural and community events in the Western Province.",
      icon: <Calendar className="w-5 h-5" />
    }
  ];

  const whatsappLink = "https://wa.me/250781065953";
  const emailAddress = "thierryrogeriradukunda@gmail.com";
  // User can replace this with a real direct download link to their PDF
  const cvDownloadLink = "#"; 

  return (
    <div className="min-h-screen bg-[#0a0a0b] text-white selection:bg-blue-500/30 scroll-smooth">
      {/* Cinematic Navigation */}
      <nav className={`fixed w-full z-[100] transition-all duration-500 px-6 lg:px-12 ${
        scrolled ? 'bg-black/80 backdrop-blur-xl py-4 border-b border-white/5' : 'bg-transparent py-8'
      }`}>
        <div className="max-w-[1400px] mx-auto flex justify-between items-center">
          <a href="#" className="text-2xl font-serif font-black tracking-tighter uppercase group">
            Roger<span className="text-blue-600 group-hover:text-white transition-colors">.</span>
          </a>

          <div className="hidden md:flex items-center space-x-10">
            {['About', 'Work', 'Expertise', 'Contact'].map((item) => (
              <a 
                key={item} 
                href={`#${item.toLowerCase()}`} 
                className="text-[10px] font-black tracking-[0.3em] uppercase text-white/40 hover:text-white transition-colors"
              >
                {item}
              </a>
            ))}
            <a 
              href={cvDownloadLink}
              className="bg-white/5 border border-white/10 text-white px-5 py-2 rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-white hover:text-black transition-all flex items-center gap-2"
            >
              <Download size={12} /> CV
            </a>
            <a 
              href={whatsappLink}
              target="_blank"
              rel="noopener noreferrer"
              className="bg-blue-600 text-white px-6 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-blue-700 transition-all flex items-center gap-2"
            >
              <MessageCircle size={14} /> Hire Me
            </a>
          </div>

          <button className="md:hidden p-2 text-white/60 hover:text-white" onClick={() => setIsMenuOpen(!isMenuOpen)}>
            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>

        {/* Mobile Menu */}
        {isMenuOpen && (
          <div className="absolute top-0 left-0 w-full h-screen bg-[#0a0a0b] p-12 flex flex-col justify-center space-y-8 animate-in fade-in duration-300">
            <button className="absolute top-8 right-8" onClick={() => setIsMenuOpen(false)}>
              <X size={32} />
            </button>
            {['About', 'Work', 'Expertise', 'Contact'].map((item) => (
              <a 
                key={item} 
                href={`#${item.toLowerCase()}`} 
                className="text-4xl font-serif font-bold italic tracking-tighter text
